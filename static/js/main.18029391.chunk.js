(this.webpackJsonpcurrency_app=this.webpackJsonpcurrency_app||[]).push([[0],{36:function(e,r,t){e.exports=t(68)},65:function(e,r,t){},67:function(e,r,t){},68:function(e,r,t){"use strict";t.r(r);var n,a=t(0),c=t.n(a),o=t(15),u=t.n(o),i=t(2),s=t(31),l=t(33),p=t(8),b=t(3),y=t(9),f=t(69),v=t(12),d=t.n(v),m=t(17),h=t(70),C=t(32),g=t.n(C),j=function(){var e=Object(m.a)(d.a.mark((function e(){var r,t,n,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:"USD",e.next=3,g.a.get("https://api.exchangeratesapi.io/latest?base=".concat(r));case 3:return t=e.sent,n=t.data,e.abrupt("return",n.rates);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e){return{type:"INPUT_EDIT",payload:{text:e}}},E=function(e){return{type:"TARGET_SELECT",payload:{currName:e}}},w=Object(h.a)("FAVORITE_MARK"),k=Object(h.a)("BASE_SWITCH"),S=Object(h.a)("RATES_UPDATE_REQUEST"),T=Object(h.a)("RATES_UPDATE_SUCCESS"),N=Object(h.a)("RATES_UPDATE_FAILURE"),A=function(e){return function(){var r=Object(m.a)(d.a.mark((function r(t){var n;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t(S()),r.prev=1,r.next=4,j(e);case 4:n=r.sent,t(T(n)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),t(N());case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},U=function(e){return function(r,t){return e[r].isFavorite===e[t].isFavorite?0:e[r].isFavorite?-1:e[t].isFavorite?1:void 0}},F=Object(f.a)((n={},Object(p.a)(n,T,(function(e,r){var t=r.payload,n=Object.keys(t),a={byCurrency:{},allCurrencys:n};return n.forEach((function(e){a.byCurrency[e]={rate:t[e],isFavorite:!!localStorage.favorites&&localStorage.favorites.includes(e)}})),a.allCurrencys.sort(U(a.byCurrency)),a})),Object(p.a)(n,w,(function(e,r){var t=r.payload.currName,n=e.byCurrency[t];n.isFavorite=!n.isFavorite;var a=Object(b.a)(Object(b.a)({},e.byCurrency),{},Object(p.a)({},t,n)),c=e.allCurrencys.sort(U(a));return Object(b.a)(Object(b.a)({},e),{},{allCurrencys:c,byCurrency:a})})),n),{byCurrency:{},allCurrencys:[]}),_=Object(f.a)(Object(p.a)({},k,(function(e,r){return localStorage.setItem("baseCurrency",r.payload.baseCurrency),r.payload.baseCurrency})),localStorage.baseCurrency?localStorage.baseCurrency:"USD"),I=Object(f.a)(Object(p.a)({},w,(function(e,r){var t=r.payload.currName,n=[];return n=e.includes(t)?e.filter((function(e){return e!==t})):[].concat(Object(l.a)(e),[r.payload.currName]),localStorage.setItem("favorites",n),n})),localStorage.favorites?localStorage.favorites.split(","):[]),x={inputValue:"",targetCurrency:localStorage.targetCurrency?localStorage.targetCurrency:"USD"},R=Object(y.c)({currencys:F,baseCurrency:_,UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"INPUT_EDIT":return Object(b.a)(Object(b.a)({},e),{},{inputValue:r.payload.text});case"TARGET_SELECT":return localStorage.setItem("targetCurrency",r.payload.currName),Object(b.a)(Object(b.a)({},e),{},{targetCurrency:r.payload.currName});default:return e}},favorites:I}),D=(t(65),t(66),t(4)),L=t(5),W=t(7),H=t(6),P=(t(67),t(34)),V=function(e){Object(W.a)(t,e);var r=Object(H.a)(t);function t(){var e;Object(D.a)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=r.call.apply(r,[this].concat(a))).makeFavoriteHandler=function(r){return function(){(0,e.props.dispatch)(w({currName:r}))}},e.makeBaseHandler=function(r){return function(){var t=e.props.dispatch;t(k({baseCurrency:r})),t(A(r))}},e}return Object(L.a)(t,[{key:"render",value:function(){var e=this.props,r=e.name,t=e.rate,n=e.isFavorite,a=e.baseCurrency,o=a===r;return c.a.createElement("div",{className:"card-body",style:n?{border:"solid black"}:null},c.a.createElement("p",{className:"h3",style:o?{color:"red"}:null},r),c.a.createElement("p",{className:""},t.toFixed(2)," ",a),c.a.createElement("p",{className:"card-footer"},c.a.createElement("button",{className:"btn-primary",onClick:this.makeFavoriteHandler(r)},"favorite"),c.a.createElement("button",{className:"btn-success",onClick:this.makeBaseHandler(r),disabled:o},"base")))}}]),t}(c.a.Component),B=Object(i.b)((function(e){return{baseCurrency:e.baseCurrency}}))(V),G=function(e){Object(W.a)(t,e);var r=Object(H.a)(t);function t(){return Object(D.a)(this,t),r.apply(this,arguments)}return Object(L.a)(t,[{key:"buildCurrList",value:function(){var e=this.props.currencys,r=e.allCurrencys;if(0===r.length)return null;var t=r.map((function(r){return[r,e.byCurrency[r]]}));return c.a.createElement("ul",{className:"row row-cols-2 row-cols-sm-3 row-cols-md-5 row-cols-lg-6"},t.map((function(e){var r=Object(P.a)(e,2),t=r[0],n=r[1];return c.a.createElement("div",{className:"card bg-dark col",key:t},c.a.createElement(B,{name:t,rate:n.rate,isFavorite:n.isFavorite}))})))}},{key:"render",value:function(){return c.a.createElement("div",null,this.buildCurrList())}}]),t}(c.a.Component),J=Object(i.b)((function(e){return{currencys:e.currencys,baseCurrency:e.baseCurrency}}))(G),M=function(e){Object(W.a)(t,e);var r=Object(H.a)(t);function t(){var e;Object(D.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).makeConverting=function(){var r=e.props,t=r.inputValue,n=r.targetCurrency,a=r.currencys;return""===t||""===n?0:(t*a.byCurrency[n].rate).toFixed(2)},e.inputHandler=function(r){r.preventDefault(),(0,e.props.dispatch)(O(r.target.value))},e.selectTargetCurr=function(r){r.preventDefault(),(0,e.props.dispatch)(E(r.target.value))},e.buildCurrList=function(){var r=e.props.currencys.allCurrencys,t=e.props.targetCurrency;return 0===r.length?c.a.createElement("select",null,"No data"):c.a.createElement("select",{onChange:e.selectTargetCurr,value:t},r.map((function(e){return c.a.createElement("option",{key:e},e)})))},e}return Object(L.a)(t,[{key:"render",value:function(){var e=this.props.baseCurrency,r=this.props.inputValue;return c.a.createElement("form",null,c.a.createElement("p",null,"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440 \u0432\u0430\u043b\u044e\u0442"),c.a.createElement("p",null,c.a.createElement("input",{onChange:this.inputHandler,value:r}),this.buildCurrList(),c.a.createElement("span",null," = ",this.makeConverting()," ",e)))}}]),t}(c.a.Component),K=Object(i.b)((function(e){return{baseCurrency:e.baseCurrency,currencys:e.currencys,inputValue:e.UI.inputValue,targetCurrency:e.UI.targetCurrency}}))(M),Q=function(e){Object(W.a)(t,e);var r=Object(H.a)(t);function t(){return Object(D.a)(this,t),r.apply(this,arguments)}return Object(L.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,r=e.dispatch,t=e.baseCurrency;r(A(t)),r(k({baseCurrency:t}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header container"},c.a.createElement(K,null),c.a.createElement(J,null)))}}]),t}(c.a.Component),$=Object(i.b)((function(e){return{baseCurrency:e.baseCurrency}}))(Q),q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function z(e,r){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),r&&r.onUpdate&&r.onUpdate(e)):(console.log("Content is cached for offline use."),r&&r.onSuccess&&r.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var X=Object(y.d)(R,Object(y.a)(s.a));u.a.render(c.a.createElement(i.a,{store:X},c.a.createElement($,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/currency_app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var r="".concat("/currency_app","/service-worker.js");q?(!function(e,r){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):z(e,r)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(r,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):z(r,e)}))}}()}},[[36,1,2]]]);
//# sourceMappingURL=main.18029391.chunk.js.map